{% load static %}
<!DOCTYPE HTML>
<!--
	Phantom by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>ACTO - Table</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="/static/assets/css/main.css" />
		<noscript><link rel="stylesheet" href="/static/assets/css/noscript.css" /></noscript>
		<script src="sweetalert2.min.js"></script>
		<link rel="stylesheet" href="sweetalert2.min.css">

	</head>
	
	<body class="is-preload">
		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Header -->
					{% include 'header.html'%}
				<!-- header end -->
				<!-- Menu -->
					{% include 'menu.html'%}	
				<!-- Menu end -->
				<!-- Main -->
					<div id="main">
						<div class="inner">
							<h1>Table Page</h1>
								<iframe src="http:///127.0.0.1:5000/stream?src=0" width="100%" height="500px">
								</iframe>
							<script type="text/javascript">
							
							function ajaxUpdate(){
									$.ajax({
        							type : "GET",
									datatype : 'json',
        							url : "http://127.0.0.1:8000/acto/table_ajax/",
        							error : function(request, status, error){
									console.log("code:"+request.status+"\n"+"message:"+request.responseText+"\n"+"error:"+error);
									},

									
        							success : function(data) {
										
										//ajax를 json파일로 받기 위해 새로운 api하나 만들어서 reponseJson(data)로 전송해야함
										//return render를 해버리면 안되는거 같음
										d = data['data']
										console.log("d:",d)
										
										if( d > 0 ){
											Swal.fire(
											'위반테이블 확인',
											'관리자는 메세지를 확인해주세요',
											'warning'
											)
										}										
									}
									
									});
									}
								
							</script>
						</div>
					</div>

				<!-- Footer -->
					{% include 'footer.html'%}
				<!-- Footer end -->
			</div>

		<!-- Scripts -->
			<script src="/static/assets/js/jquery.min.js"></script>
			<script src="/static/assets/js/browser.min.js"></script>
			<script src="/static/assets/js/breakpoints.min.js"></script>
			<script src="/static/assets/js/util.js"></script>
			<script src="/static/assets/js/main.js"></script>
			<script src="https://cdn.jsdelivr.net/npm/sweetalert2@9"></script>
	</body>
<script>
$(document).ready(function(){
   		playTimer = setInterval(function() {ajaxUpdate();}, 10000);
		   
  		}
		);
</script>
</html>